{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "Urls": "http://0.0.0.0:5050",
  "Jwt": {
    "Key": "8DTPBHtQ4i9gzOjDNbPRPQEOHA5SXKdciEskKmsnSns=",
    "Issuer": "decloud-orchestrator",
    "Audience": "decloud-users",
    "ExpiryMinutes": 1440
  },
  "ConnectionStrings": {
    "MongoDB": "mongodb+srv://stackfi-admin:n550jpTSEDUFn0Le@clusterstackfi.pxlau.mongodb.net/DeCloud?retryWrites=true&w=majority&appName=ClusterStackFi"
  },
  "CentralIngress": {
    "Enabled": true,
    "BaseDomain": "vms.stackfi.tech",
    "CaddyAdminUrl": "http://localhost:2019",
    "AcmeEmail": "admin@stackfi.tech",
    "DnsProvider": "cloudflare",
    "DnsApiToken": "h51N0EibU86xrixrY6JckkLgUx_L4pG3bwC1I9yh",
    "DefaultTargetPort": 80,
    "SubdomainPattern": "{name}",
    "AutoRegisterOnStart": true,
    "AutoRemoveOnStop": true,
    "ProxyTimeoutSeconds": 30,
    "EnableWebSocket": true
  },
  // =====================================================
  // ATTESTATION CONFIGURATION (Security Critical)
  // =====================================================
  "Attestation": {
    // =====================================================
    // TIMING (Critical Security Parameter)
    // =====================================================

    // Maximum allowed response time in milliseconds
    // This is THE key security parameter
    // Must be short enough that node can't pause VM and extract key
    // 
    // Attack timing:
    //   - Pause VM: ~1ms
    //   - Dump 1GB memory: 100-500ms
    //   - Search for key: 10-100ms
    //   - Total: >150ms
    //
    // Therefore 100ms is safe - node can't complete attack in time
    // DO NOT increase above 200ms without security review.

    // Adaptive timeout settings
    "EnableAdaptiveTimeout": true,
    "MinVmAgeForAttestationSeconds": 300,
    "MaxProcessingTimeMs": 100,
    "SafetyMarginMs": 20,
    "AbsoluteMaxTimeoutMs": 500,
    "MaxResponseTimeMs": 300,

    // Calibration settings
    "InitialCalibrationPings": 5,
    "RecalibrationIntervalHours": 24,
    "RttChangeThreshold": 0.3,
    "MaxStdDevRatio": 0.5,
    "DefaultRttMs": 50,
    "SmoothingFactor": 0.3,

    // =====================================================
    // CHALLENGE SCHEDULE
    // =====================================================

    // Startup period: More frequent challenges to catch fraud early
    "StartupChallengeIntervalSeconds": 60,

    // Normal challenge schedule : Every 5 minutes challenges (reduce overhead)
    "NormalChallengeIntervalSeconds": 300,

    // How long startup period lasts (minutes)
    "StartupPeriodMinutes": 5,

    // =====================================================
    // MEMORY TOUCH TEST (Detects Swap/Overcommit)
    // =====================================================

    // Maximum total time for 64 page touches
    // Real RAM: 5-15ms, SSD swap: 50-200ms, HDD swap: 200-2000ms
    "MaxMemoryTouchMs": 80,

    // Maximum time for single page touch
    // Detects intermittent swap thrashing
    "MaxSinglePageTouchMs": 20,

    // =====================================================
    // RESOURCE VERIFICATION
    // =====================================================

    // Memory tolerance (actual vs expected)
    // Some overhead expected for kernel, buffers, etc.
    "MemoryToleranceLow": 0.85,
    "MemoryToleranceHigh": 1.15,

    // =====================================================
    // BILLING CONTROL
    // =====================================================

    // Consecutive failures before pausing billing
    // Allows for transient network issues
    "FailureThreshold": 3,

    // Consecutive successes required to resume billing
    "RecoveryThreshold": 2
  },

  // =====================================================
  // NETWORK CONFIGURATION
  // =====================================================
  "AttestationNetwork": {
    // Port the agent listens on inside VM
    "AgentPort": 9999,

    // HTTP timeout for challenge requests (should be > MaxResponseTimeMs)
    "HttpTimeoutMs": 200,

    // Enable TLS for agent communication (future)
    "UseTls": false
  },
  // =====================================================
  // PAYMENT SYSTEM CONFIGURATION
  // =====================================================
  "Payment": {
    // =================================================
    // BLOCKCHAIN CONFIGURATION
    // =================================================

    // Chain ID for blockchain network
    // 80002 = Polygon Amoy Testnet
    // 137 = Polygon Mainnet (production)
    "ChainId": "80002",
    // RPC endpoint for blockchain communication
    // Use Alchemy, Infura, or other provider for reliability
    //"RpcUrl": "https://polygon-amoy.g.alchemy.com/v2/aMPD5zFeLGpfDtRtrSKZE",
    "RpcUrl": "https://rpc-amoy.polygon.technology",
    // Smart contract addresses (deploy these first!)
    "EscrowContractAddress": "0xa713e6af821f10d6dAac3Da39715e05dc9846d84",
    "UsdcTokenAddress": "0x8B0180f2101c8260d49339abfEe87927412494B4",
    // =================================================
    // ORCHESTRATOR WALLET (Critical - Secure This!)
    // =================================================

    // Orchestrator's wallet address for signing settlement transactions
    "OrchestratorWalletAddress": "0xbCbF20BB01e64fa2038B5F307aB2a8dbC314F60D",
    // SECURITY CRITICAL: Private key for settlement signing
    // MUST be set via environment variable in production
    // NEVER commit actual private key to source control
    // Set via: export Payment__OrchestratorPrivateKey="0x..."
    "OrchestratorPrivateKey": "dee3def1c9cc9e2dca4a107d2ead2c20086a281077afd049c58243d695547dfb",
    // =================================================
    // CONFIRMATION REQUIREMENTS
    // =================================================

    // Number of block confirmations required before accepting deposit
    // Higher = more secure but slower
    // Polygon: 12 blocks â‰ˆ 25 seconds
    "RequiredConfirmations": 12,
    // =================================================
    // SETTLEMENT CONFIGURATION
    // =================================================

    // Minimum amount before triggering settlement batch
    // Batching reduces gas costs
    "MinSettlementAmount": 10.0,
    // Gas optimization
    // Max 10 per blockchain tx
    "MaxSettlementsPerBatch": 10,
    // How often to check for pending settlements
    // 24 hours = daily settlement batches
    "SettlementInterval": "24:00:00",
    // =================================================
    // FEE STRUCTURE
    // =================================================

    // Platform fee percentage (0-100)
    // Example: 5% = platform keeps 5%, node gets 95%
    "PlatformFeePercent": 5.0
  }
}